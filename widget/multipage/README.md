# Multipage Widget –¥–ª—è Grist

–ú–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π –∫–∞—Å—Ç–æ–º–Ω—ã–π –≤–∏–¥–∂–µ—Ç –¥–ª—è Grist, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É SPA (Single Page Application) —Å —Ä–∞–∑–¥–µ–ª—å–Ω—ã–º–∏ HTML/JS —Ñ–∞–π–ª–∞–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ –∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º –ø–æ–¥–ø–∏—Å–æ–∫.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–í–∏–¥–∂–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π SPA-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ Grist —Å —Ç—Ä–µ–º—è —ç–∫—Ä–∞–Ω–∞–º–∏:

| –≠–∫—Ä–∞–Ω | –§–∞–π–ª—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-------|----------|
| **–ì–ª–∞–≤–Ω–∞—è** | `pages/home.html`, `pages/home.js` | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π |
| **–î–µ—Ç–∞–ª–∏** | `pages/details.html`, `pages/details.js` | –†–∞–±–æ—Ç–∞ —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ Grist |
| **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** | `pages/settings.html`, `pages/settings.js` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –≤–∏–¥–∂–µ—Ç–∞ |

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —ç–∫—Ä–∞–Ω–æ–≤** ‚Äî HTML –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `fetch()`, JS —á–µ—Ä–µ–∑ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π `<script>`
- ‚úÖ **–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ–¥–ø–∏—Å–æ–∫** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —ç–∫—Ä–∞–Ω–æ–≤
- ‚úÖ **–ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è** ‚Äî —Ñ—É–Ω–∫—Ü–∏—è `navigate('screenName')` –¥–æ—Å—Ç—É–ø–Ω–∞ –∏–∑ –ª—é–±–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ** ‚Äî –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é –ø–æ–ª—è `Status` (Done ‚Üí –î–µ—Ç–∞–ª–∏, Draft ‚Üí –ì–ª–∞–≤–Ω–∞—è)
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è** ‚Äî –∞–∫—Ç–∏–≤–Ω—ã–π —ç–∫—Ä–∞–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ URL hash –∏ localStorage
- ‚úÖ **–†–∞–±–æ—Ç–∞ —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏** ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π
- ‚úÖ **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ñ–æ—Ä–º—É–ª—å–Ω—ã—Ö –∫–æ–ª–æ–Ω–æ–∫** ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã—á–∏—Å–ª—è–µ–º—ã—Ö –ø–æ–ª–µ–π

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
multipage/
‚îú‚îÄ‚îÄ index.html              # –û—Å–Ω–æ–≤–Ω–æ–π HTML-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–∏–¥–∂–µ—Ç–∞
‚îú‚îÄ‚îÄ app.js                  # –†–æ—É—Ç–µ—Ä, –Ω–∞–≤–∏–≥–∞—Ü–∏—è, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Grist API
‚îú‚îÄ‚îÄ subscriptions.js        # –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ–¥–ø–∏—Å–æ–∫ Grist API
‚îú‚îÄ‚îÄ styles.css              # –û–±—â–∏–µ —Å—Ç–∏–ª–∏
‚îú‚îÄ‚îÄ widget.json             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Grist
‚îú‚îÄ‚îÄ README.md               # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ pages/
    ‚îú‚îÄ‚îÄ home.html           # HTML-—Ñ—Ä–∞–≥–º–µ–Ω—Ç –≥–ª–∞–≤–Ω–æ–π
    ‚îú‚îÄ‚îÄ home.js             # –ú–æ–¥—É–ª—å –≥–ª–∞–≤–Ω–æ–π
    ‚îú‚îÄ‚îÄ details.html        # HTML-—Ñ—Ä–∞–≥–º–µ–Ω—Ç –¥–µ—Ç–∞–ª–µ–π
    ‚îú‚îÄ‚îÄ details.js          # –ú–æ–¥—É–ª—å –¥–µ—Ç–∞–ª–µ–π
    ‚îú‚îÄ‚îÄ settings.html       # HTML-—Ñ—Ä–∞–≥–º–µ–Ω—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫
    ‚îî‚îÄ‚îÄ settings.js         # –ú–æ–¥—É–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (index.html)

```html
<div id="app"></div>  <!-- –°—é–¥–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–Ω—Ç —ç–∫—Ä–∞–Ω–æ–≤ -->
```

### ‚ö†Ô∏è –í–∞–∂–Ω–æ: grist.ready()

**–ü–µ—Ä–µ–¥ –ª—é–±—ã–º–∏ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏—è Grist API –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–∑–≤–∞—Ç—å `grist.ready()`**!

–≠—Ç–æ **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ** Grist API. –ë–µ–∑ —ç—Ç–æ–≥–æ –≤—ã–∑–æ–≤–∞ –ø–æ–¥–ø–∏—Å–∫–∏ `grist.onRecord()` –∏ `grist.onRecords()` **–Ω–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å**.

–í–∏–¥–∂–µ—Ç –≤—ã–∑—ã–≤–∞–µ—Ç `grist.ready()` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `initializeGrist()` –º–æ–¥—É–ª—è `app.js`:

```javascript
// –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ (–±–µ–∑ callback-—Ñ—É–Ω–∫—Ü–∏–π, —Ç.–∫. –æ–Ω–∏ –Ω–µ –∫–ª–æ–Ω–∏—Ä—É—é—Ç—Å—è –¥–ª—è postMessage)
grist.ready({
    requiredAccess: 'full'
});
```

–¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –ø–æ–¥–ø–∏—Å–∫–∏:

```javascript
grist.onRecord(function(record) { ... });
grist.onRecords(function(records) { ... });
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ callback-—Ñ—É–Ω–∫—Ü–∏–∏ –≤ `grist.ready()` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `onEditOptions`, `onAccessLevel`) ‚Äî –æ–Ω–∏ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è `postMessage` –∏ –≤—ã–∑–æ–≤—É—Ç –æ—à–∏–±–∫—É RPC.

### –†–æ—É—Ç–µ—Ä (app.js)

–£–ø—Ä–∞–≤–ª—è–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º —ç–∫—Ä–∞–Ω–æ–≤:

1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç HTML —á–µ—Ä–µ–∑ `fetch('pages/<name>.html')`
2. –ó–∞–≥—Ä—É–∂–∞–µ—Ç JS —á–µ—Ä–µ–∑ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π `<script>`
3. –í—ã–∑—ã–≤–∞–µ—Ç `destroy()` –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –º–æ–¥—É–ª—è
4. –í—ã–∑—ã–≤–∞–µ—Ç `init(context)` –Ω–æ–≤–æ–≥–æ –º–æ–¥—É–ª—è

### –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ–¥–ø–∏—Å–æ–∫ (subscriptions.js)

```javascript
// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∫–∏
SubscriptionsManager.subscribe(unsubscribeFn, 'screenName');

// –û—á–∏—Å—Ç–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫ —ç–∫—Ä–∞–Ω–∞
SubscriptionsManager.cleanupScreen('screenName');

// –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
SubscriptionsManager.cleanupAll();
```

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–æ–¥—É–ª—è —ç–∫—Ä–∞–Ω–∞

–ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –¥–æ–ª–∂–µ–Ω —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å:

```javascript
var ScreenNameModule = (function() {
    'use strict';

    function init(context) {
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–∞
        // context —Å–æ–¥–µ—Ä–∂–∏—Ç: navigate, grist, subscribe, showStatusMessage, ...
    }

    function destroy() {
        // –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤: —Ç–∞–π–º–µ—Ä—ã, –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
    }

    function onRecord(record) {
        // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏
    }

    function onRecords(records) {
        // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∑–∞–ø–∏—Å–µ–π
    }

    return {
        init: init,
        destroy: destroy,
        onRecord: onRecord,
        onRecords: onRecords
    };
})();
```

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–∞–ø–∫—É `multipage` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤–∏–¥–∂–µ—Ç–æ–≤ Grist
2. –í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ Grist –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π –≤–∏–¥–∂–µ—Ç
3. –í—ã–±–µ—Ä–∏—Ç–µ `Multipage Widget` –∏–∑ —Å–ø–∏—Å–∫–∞
4. **–í–∞–∂–Ω–æ:** –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∏–≤—è–∑–∫—É –∫ —Ç–∞–±–ª–∏—Ü–µ:
   - –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–∏–¥–∂–µ—Ç–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É (*Select Data*)
   - –í–∫–ª—é—á–∏—Ç–µ –æ–ø—Ü–∏—é *Select By* –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫—É—Ä—Å–æ—Ä–∞
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–∞: *Read selected table* –∏–ª–∏ *Full document access*

## ‚ö†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã Grist API

–í–∏–¥–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `grist.onRecord()` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ç–µ–∫—É—â–µ–π –∑–∞–ø–∏—Å–∏. –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

### 1. –ü—Ä–∏–≤—è–∑–∫–∞ –∫ —Ç–∞–±–ª–∏—Ü–µ –≤ Grist

–ü—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –≤–∏–¥–∂–µ—Ç–∞ –≤ Grist:
- ‚úî –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É –≤ —Ä–∞–∑–¥–µ–ª–µ *Select Data*
- ‚úî –í–∫–ª—é—á–∏—Ç–µ *Select By* —Ç–∞–±–ª–∏—Ü—É (–¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫—É—Ä—Å–æ—Ä–∞)
- ‚úî –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–∞: *Read selected table* –∏–ª–∏ *Full document access*

### 2. –í—ã–±—Ä–∞–Ω–Ω—ã–π —Ä—è–¥ –≤ —Ç–∞–±–ª–∏—Ü–µ

`grist.onRecord()` –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç **–∫—É—Ä—Å–æ—Ä** (–≤—ã–±—Ä–∞–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É), –∞ –Ω–µ –≤—Å–µ –∑–∞–ø–∏—Å–∏:
- –ï—Å–ª–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ **–Ω–µ –≤—ã–±—Ä–∞–Ω –Ω–∏ –æ–¥–∏–Ω —Ä—è–¥** ‚Äî `onRecord` –Ω–µ –ø–æ–ª—É—á–∏—Ç –¥–∞–Ω–Ω—ã—Ö
- –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π —Ç–∞–±–ª–∏—Ü—ã –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `grist.onRecords()`

### 3. –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

–í–∏–¥–∂–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç `grist.ready()` **–¥–æ** –ø–æ–¥–ø–∏—Å–æ–∫:

```javascript
// 1. –ó–∞–≥—Ä—É–∑–∫–∞ DOM
document.addEventListener('DOMContentLoaded', function() {
    AppModule.initializeApp();
});

// 2. –í—ã–∑–æ–≤ grist.ready()
grist.ready({ requiredAccess: 'full' });

// 3. –ü–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏—è
grist.onRecord(record => { ... });
grist.onRecords(records => { ... });
```

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏

```javascript
// –ò–∑ –ª—é–±–æ–≥–æ –º–µ—Å—Ç–∞ –≤ –∫–æ–¥–µ
navigate('details');
navigate('home');
navigate('settings');
```

### –†–∞–±–æ—Ç–∞ —Å Grist API –≤ –º–æ–¥—É–ª—è—Ö

```javascript
function init(context) {
    // –î–æ—Å—Ç—É–ø –∫ —Ç–µ–∫—É—â–µ–π –∑–∞–ø–∏—Å–∏
    var record = context.currentRecord;

    // –ü–æ–¥–ø–∏—Å–∫–∞ —á–µ—Ä–µ–∑ –º–µ–Ω–µ–¥–∂–µ—Ä
    var unsubscribe = context.grist.onRecord(function(record) {
        console.log('–ó–∞–ø–∏—Å—å –∏–∑–º–µ–Ω–µ–Ω–∞:', record);
    });
    context.subscribe(unsubscribe);

    // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–±–ª–∏—Ü
    context.loadTables().then(function(tables) {
        console.log('–¢–∞–±–ª–∏—Ü—ã:', tables);
    });

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏
    context.updateRecord('MyTable', 123, { Name: 'New Value' });
}
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–æ —Å—Ç–∞—Ç—É—Å—É

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–∫–ª—é—á–∏—Ç–µ **¬´–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–æ —Å—Ç–∞—Ç—É—Å—É¬ª**:

- `Status = "Done"` ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —ç–∫—Ä–∞–Ω ¬´–î–µ—Ç–∞–ª–∏¬ª
- `Status = "Draft"` ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —ç–∫—Ä–∞–Ω ¬´–ì–ª–∞–≤–Ω–∞—è¬ª

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

| –ù–∞—Å—Ç—Ä–æ–π–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ó–Ω–∞—á–µ–Ω–∏—è |
|-----------|----------|----------|
| **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ** | –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–æ–≤ –ø–æ —Å—Ç–∞—Ç—É—Å—É –∑–∞–ø–∏—Å–∏ | –í–∫–ª—é—á–µ–Ω–æ / –û—Ç–∫–ª—é—á–µ–Ω–æ |
| **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é** | –≠–∫—Ä–∞–Ω, –æ—Ç–∫—Ä—ã–≤–∞–µ–º—ã–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ | –ì–ª–∞–≤–Ω–∞—è / –î–µ—Ç–∞–ª–∏ / –ù–∞—Å—Ç—Ä–æ–π–∫–∏ |

## üé® –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è

–í–∏–¥–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Bootstrap 5** –∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ CSS-–∞–Ω–∏–º–∞—Ü–∏–∏.

### –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

```css
@keyframes screenFadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}
```

### –¢—ë–º–Ω–∞—è —Ç–µ–º–∞

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `prefers-color-scheme: dark`.

## üîå –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞

1. –°–æ–∑–¥–∞–π—Ç–µ `pages/newscreen.html`:
```html
<div class="screen-newscreen">
    <h1>–ù–æ–≤—ã–π —ç–∫—Ä–∞–Ω</h1>
    <button onclick="navigate('home')">–ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
</div>
```

2. –°–æ–∑–¥–∞–π—Ç–µ `pages/newscreen.js`:
```javascript
var NewscreenModule = (function() {
    'use strict';

    function init(context) {
        console.log('[NewscreenModule] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è');
    }

    function destroy() {
        console.log('[NewscreenModule] –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ');
    }

    return {
        init: init,
        destroy: destroy
    };
})();
```

3. –î–æ–±–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏—é (`index.html`):
```html
<li class="nav-item">
    <a class="nav-link" href="#view=newscreen" data-screen="newscreen">
        –ù–æ–≤—ã–π
    </a>
</li>
```

4. –î–æ–±–∞–≤—å—Ç–µ —ç–∫—Ä–∞–Ω –≤ —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö (`app.js`):
```javascript
var AVAILABLE_SCREENS = ['home', 'details', 'settings', 'newscreen'];
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤–Ω–µ Grist:
- –≠–º—É–ª–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Grist API
- –ß–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–µ—Å—Ç–æ–≤–∞—è –∑–∞–ø–∏—Å—å
- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í–∏–¥–∂–µ—Ç –≤—ã–≤–æ–¥–∏—Ç –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª—å:
- `[AppModule]` ‚Äî —Å–æ–±—ã—Ç–∏—è —Ä–æ—É—Ç–µ—Ä–∞
- `[SubscriptionsManager]` ‚Äî —Å–æ–±—ã—Ç–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–æ–¥–ø–∏—Å–æ–∫
- `[HomeModule]`, `[DetailsModule]`, `[SettingsModule]` ‚Äî —Å–æ–±—ã—Ç–∏—è —ç–∫—Ä–∞–Ω–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫

–ù–∞ —ç–∫—Ä–∞–Ω–µ ¬´–ù–∞—Å—Ç—Ä–æ–π–∫–∏¬ª –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:
- –ê–∫—Ç–∏–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### `grist.onRecord()` –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** Callback `onRecord` –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ.

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

1. **–í–∏–¥–∂–µ—Ç –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ —Ç–∞–±–ª–∏—Ü–µ**
   - –†–µ—à–µ–Ω–∏–µ: –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–∏–¥–∂–µ—Ç–∞ Grist –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É (*Select Data*)
   - –í–∫–ª—é—á–∏—Ç–µ –æ–ø—Ü–∏—é *Select By* –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫—É—Ä—Å–æ—Ä–∞

2. **–ù–µ –≤—ã–±—Ä–∞–Ω —Ä—è–¥ –≤ —Ç–∞–±–ª–∏—Ü–µ**
   - `onRecord` –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç **–∫—É—Ä—Å–æ—Ä**, –∞ –Ω–µ –≤—Å–µ –∑–∞–ø–∏—Å–∏
   - –†–µ—à–µ–Ω–∏–µ: –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –ª—é–±—É—é —Å—Ç—Ä–æ–∫—É –≤ —Ç–∞–±–ª–∏—Ü–µ Grist
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `grist.onRecords()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π

3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–∞**
   - –†–µ—à–µ–Ω–∏–µ: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ *Read selected table* –∏–ª–∏ *Full document access*

4. **`grist.ready()` –≤—ã–∑–≤–∞–Ω –ø–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–æ–∫**
   - –†–µ—à–µ–Ω–∏–µ: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `grist.ready()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è **–¥–æ** –ª—é–±—ã—Ö `onRecord`/`onRecords`

5. **Callback-—Ñ—É–Ω–∫—Ü–∏–∏ –≤ `grist.ready()`**
   - –†–µ—à–µ–Ω–∏–µ: –ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `grist.ready()` ‚Äî –æ–Ω–∏ –Ω–µ –∫–ª–æ–Ω–∏—Ä—É—é—Ç—Å—è –¥–ª—è `postMessage`

### –û—à–∏–±–∫–∞ RPC: "could not be cloned"

**–ü—Ä–æ–±–ª–µ–º–∞:** `Failed to execute 'postMessage' on 'Window': function(...) could not be cloned`

**–ü—Ä–∏—á–∏–Ω–∞:** –ü–µ—Ä–µ–¥–∞—á–∞ callback-—Ñ—É–Ω–∫—Ü–∏–π –≤ `grist.ready()`:

```javascript
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
grist.ready({
    requiredAccess: 'full',
    onEditOptions: function(options) { ... }  // –û—à–∏–±–∫–∞ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
});
```

**–†–µ—à–µ–Ω–∏–µ:**

```javascript
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
grist.ready({
    requiredAccess: 'full'
});

// –î–ª—è –æ–ø—Ü–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—É—é –ø–æ–¥–ø–∏—Å–∫—É
grist.onOptions(options => { ... });
```

### –í–∏–¥–∂–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ó–∞–≥—Ä—É–∑–∫–∞..." –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- –ù–µ –∑–∞–≥—Ä—É–∂–µ–Ω —à–∞–±–ª–æ–Ω —ç–∫—Ä–∞–Ω–∞ (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ `pages/*.html`)
- –û—à–∏–±–∫–∞ –≤ JS-–º–æ–¥—É–ª–µ —ç–∫—Ä–∞–Ω–∞ (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞)
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ CORS –ø—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

**–†–µ—à–µ–Ω–∏–µ:**
- –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—à–∏–±–∫–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã `pages/*.html` –∏ `pages/*.js` —Å—É—â–µ—Å—Ç–≤—É—é—Ç

## üìù –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Grist Core –∏–ª–∏ Grist Cloud
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä (Chrome, Firefox, Edge, Safari)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ JavaScript ES5+
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `fetch()` –∏ `async/await`

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- ‚ùå –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `iframe`
- ‚ùå –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–±–æ—Ä—â–∏–∫–∏ (webpack, vite)
- ‚ùå –ù–µ–ª—å–∑—è —Ä–∞–∑–º–µ—â–∞—Ç—å –ª–æ–≥–∏–∫—É –≤ HTML-—Ñ–∞–π–ª–∞—Ö
- ‚ùå –ù–µ–ª—å–∑—è –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –Ω–∞ Grist API –Ω–∞–ø—Ä—è–º—É—é (—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –º–µ–Ω–µ–¥–∂–µ—Ä)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## üîó –°—Å—ã–ª–∫–∏

- [Grist Labs](https://www.getgrist.com/)
- [Grist Core (GitHub)](https://github.com/gristlabs/grist-core)
- [Grist Widget (GitHub)](https://github.com/gristlabs/grist-widget)
