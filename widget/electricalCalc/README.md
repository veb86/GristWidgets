# Виджет-органайзер electricalCalc

## Описание

Виджет-органайзер `electricalCalc` предназначен для одновременной работы с несколькими виджетами Grist в рамках единого интерфейса. Он позволяет повысить удобство тестирования и отладки каждого модуля по отдельности, обеспечивая их полную функциональную независимость.

## Архитектура

### Структура интерфейса

Интерфейс разделен на две основные части:

- **Левая панель (20%)** - навигационное дерево устройств
  - Загружает виджет `tree` через iframe
  - Обеспечивает иерархическую навигацию по устройствам
  
- **Правая панель (80%)** - рабочая область с вкладками
  - Содержит переключаемые вкладки с различными виджетами
  - Каждая вкладка загружает отдельный виджет через iframe

### Вкладки правой панели

1. **Таблица** - виджет `edittable` для редактирования данных в табличной форме
2. **Однолинейная схема** - виджет `onelineschema` для визуализации электрических схем

## Техническая реализация

### HTML структура

Используется семантическая HTML5 разметка с flexbox-версткой:

```html
<div class="main-container">
    <div id="left-panel">
        <iframe src="../tree/index.html"></iframe>
    </div>
    <div id="right-panel">
        <div class="tabs">
            <!-- Кнопки вкладок -->
        </div>
        <div class="tab-content">
            <!-- Панели с iframe -->
        </div>
    </div>
</div>
```

### CSS стили

- **Flexbox верстка** для адаптивного разделения экрана
- **CSS Grid** для системы вкладок
- **Адаптивность** для различных размеров экрана
- **Визуальное разделение** панелей с помощью границ и фонов

### JavaScript логика

Класс `TabManager` обеспечивает:

- Переключение между вкладками
- Клавиатурную навигацию (Ctrl+Tab, Ctrl+Shift+Tab)
- Обработку состояний активной вкладки
- Логирование действий для отладки

## Особенности реализации

### Независимость виджетов

Каждый вложенный виджет работает независимо:

- **Не вмешивается во внутреннюю логику** других виджетов
- **Самостоятельно подключается к Grist API**
- **Сохраняет полную функциональность** как при отдельном использовании

### Безопасность

- **Изоляция через iframe** предотвращает конфликты между виджетами
- **Отсутствие прямого взаимодействия** с JavaScript вложенных виджетов
- **Соблюдение политики безопасности** браузера

## Файловая структура

```
electricalCalc/
├── index.html          # Основной HTML файл
├── css/
│   └── style.css        # Стили виджета
├── js/
│   └── tabs.js          # Логика управления вкладками
└── widget.json          # Конфигурация виджета
```

## Совместимость

- **Grist версии**: >= 1.0.0
- **Браузеры**: Chrome, Firefox, Safari, Edge
- **Разрешение**: адаптивный дизайн для мобильных и десктопных устройств

## Установка и использование

1. Скопировать директорию `electricalCalc` в папку `widget/`
2. Добавить виджет в Grist через интерфейс custom widgets
3. Настроить доступ к таблицам и данным в каждом вложенном виджете

## Тестирование

Для тестирования функциональности:

1. Открыть `index.html` в браузере
2. Проверить загрузку всех вложенных виджетов
3. Убедиться в корректной работе переключения вкладок
4. Проверить адаптивность на разных размерах экрана

## Разработка

При внесении изменений:

1. Следовать принципу независимости виджетов
2. Не нарушать существующую функциональность
3. Добавлять комментарии на русском языке
4. Проверять совместимость с браузерами

## Лицензия

Код распространяется под той же лицензией, что и основной проект GristWidgets.