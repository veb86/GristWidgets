<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Line Widget –¥–ª—è Grist</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">

    <!-- –û–±—â–∏–µ —Å—Ç–∏–ª–∏ –≤–∏–¥–∂–µ—Ç–∞ -->
    <link rel="stylesheet" href="./css/styles.css">
</head>
<body>
    <div class="widget-container">
        <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">üé® ZCAD Random Lines</h5>
            </div>
            <div class="card-body">
                <!-- –§–æ—Ä–º–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ -->
                <form id="draw-form" class="mb-4">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="line-count" class="form-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∏–Ω–∏–π</label>
                            <input type="number" class="form-control" id="line-count" 
                                   value="1000" min="1" max="10000" required>
                            <div class="form-text">–û—Ç 1 –¥–æ 10000</div>
                        </div>
                        <div class="col-md-6">
                            <label for="seed-value" class="form-label">Seed (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                            <input type="number" class="form-control" id="seed-value" 
                                   placeholder="–î–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏">
                            <div class="form-text">–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ seed</div>
                        </div>
                    </div>
                    
                    <div class="row g-3 mt-2">
                        <div class="col-md-4">
                            <label for="min-coord" class="form-label">–ú–∏–Ω. –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞</label>
                            <input type="number" class="form-control" id="min-coord" 
                                   value="-100" step="1">
                        </div>
                        <div class="col-md-4">
                            <label for="max-coord" class="form-label">–ú–∞–∫—Å. –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞</label>
                            <input type="number" class="form-control" id="max-coord" 
                                   value="100" step="1">
                        </div>
                        <div class="col-md-4">
                            <label for="flask-url" class="form-label">Flask API URL</label>
                            <input type="url" class="form-control" id="flask-url" 
                                   value="http://127.0.0.1:5000" required>
                        </div>
                    </div>
                </form>

                <!-- –ö–Ω–æ–ø–∫–∞ –∑–∞–ø—É—Å–∫–∞ -->
                <div class="d-grid gap-2">
                    <button id="draw-btn" class="btn btn-success btn-lg" type="button">
                        üöÄ –ù–∞—Ä–∏—Å–æ–≤–∞—Ç—å <span id="btn-line-count">1000</span> —Å–ª—É—á–∞–π–Ω—ã—Ö –ª–∏–Ω–∏–π
                    </button>
                </div>

                <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è -->
                <div id="progress-container" class="mt-4 d-none">
                    <div class="progress">
                        <div id="progress-bar" class="progress-bar progress-bar-striped progress-bar-animated" 
                             role="progressbar" style="width: 0%"></div>
                    </div>
                    <p id="progress-text" class="text-center mt-2 text-muted">–û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥—ã...</p>
                </div>

                <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ -->
                <div id="result-container" class="mt-4 d-none">
                    <div id="result-alert" class="alert" role="alert"></div>
                </div>

                <!-- –õ–æ–≥ –æ–ø–µ—Ä–∞—Ü–∏–π -->
                <div class="mt-4">
                    <h6>üìã –ñ—É—Ä–Ω–∞–ª –æ–ø–µ—Ä–∞—Ü–∏–π</h6>
                    <div id="log-container" class="log-container">
                        <p class="text-muted small">–ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏...</p>
                    </div>
                </div>
            </div>
            <div class="card-footer text-muted small">
                <div class="d-flex justify-content-between">
                    <span id="connection-status">üî¥ ZCAD: –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ</span>
                    <button id="ping-btn" class="btn btn-sm btn-outline-primary">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Grist Widget API -->
    <script src="./grist-plugin-api.js"></script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –≤–∏–¥–∂–µ—Ç–∞ -->
    <script src="./js/app.js"></script>
</body>
</html>
